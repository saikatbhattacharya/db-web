<!doctype html>
<html lang="en" ng-app="" ng-controller="dbController">

<head>
  <meta charset="utf-8">
  <meta name="description" content="Responsive Bootstrap Landing Page Template">
  <meta name="keywords" content="Bootstrap, Landing page, Template, Registration, Landing">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="author" content="Grayrids">
  <title>দক্ষিণের বারান্দা</title>

  <link href="css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome CSS -->
  <link rel="stylesheet" href="fonts/font-awesome.min.css" type="text/css" media="screen">
  <!-- Include roboto.css to use the Roboto web font, material.css to include the theme and ripples.css to style the ripple effect -->
  <link href="css/material.min.css" rel="stylesheet">
  <link href="css/ripples.min.css" rel="stylesheet">
  <link href="css/main.css" rel="stylesheet">
  <link href="css/responsive.css" rel="stylesheet">
  <link href="css/animate.min.css" rel="stylesheet">
    <link rel=icon href="./img/favicon.ico?v=2">

  <style>
    .loader {
      margin-left: 45%;
      border: 16px solid #f3f3f3;
      border-radius: 50%;
      border-top: 16px solid teal;
      width: 120px;
      height: 120px;
      -webkit-animation: spin 2s linear infinite;
      animation: spin 2s linear infinite;
    }
    
    @-webkit-keyframes spin {
      0% {
        -webkit-transform: rotate(0deg);
      }
      100% {
        -webkit-transform: rotate(360deg);
      }
    }
    
    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
  </style>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-88590518-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

<body>

  <div class="navbar navbar-invers menu-wrap">
    <div class="navbar-header text-center">
      <a class="navbar-brand logo-right" href="javascript:void(0)"><i class="mdi-image-timelapse"></i></a>
    </div>

    <button class="close-button" id="close-button">Close Menu</button>
  </div>

  <div class="content-wrap">
    <header class="" id="home">

      <div class="container">
        <div class="col-md-12">

          <div class="navbar navbar-inverse sticky-navigation navbar-fixed-top" role="navigation" data-spy="affix" data-offset-top="200"
            style="background-color: #009688;padding:0px;">
            <div class="container">
              <div class="navbar-header">
                <a class="logo-left " href="/"><img src="./img/logo_white.png" style="width: 200px;" /></a>
              </div>
              <div class="navbar-right">
                <a href="/" class="btn btn-primary">
                  <i class="mdi-action-home"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
    </header>




    <section id="features" style="padding-top: 130px;padding-bottom: 130px;">
      <div class="container">
        <div class="section-header">
          <h1 class="section-title wow fadeInRight" data-wow-duration="1000ms" data-wow-delay="300ms">{{title}}</h1>
          <h2 class="wow fadeInRight" data-wow-duration="1000ms" data-wow-delay="400ms" style="font-size: 20px;">{{author}}</h2>
          <br/>
          <div class="commentDivider"></div>
        </div>
        <div class="row">
          <div id="loading" class="loader text-center"></div>
          <div class="col-md-12 col-sm-12 col-xs-12" ng-repeat="x in content track by $index">
            <h4 style="line-height: 150%;">{{x}}</h4>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 col-sm-12 col-xs-12">
            <a href="https://www.facebook.com/sharer/sharer.php?u=" +{{href}} target="_blank" class="btn btn-lg btn-primary wow fadeInUp"
              data-wow-duration="1000ms" data-wow-delay="400ms">Share in FaceBook</a>
          </div>

        </div>

        <div class="row">
          <div class="col-md-12 col-sm-12 col-xs-12" style="margin-bottom: 2%;">
            <h2>Comments ({{commentCount}}): </h2>
            <div class="commentDivider"></div>
            <div class="commentBlock" ng-repeat="x in comments track by $index">
              <h4>{{x.name}}:</h4><br/>
              <h6>{{x.content}}</h6>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 col-sm-12 col-xs-12">
          <form class="form-horizontal">
            <div class="form-group">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <input type="text" class="form-control" id="commentorName" placeholder="আপনার নাম" ng-model="user.name">
              </div>
            </div>
            <div class="form-group">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <input type="text" class="form-control" id="comment" placeholder="মন্তব্য" ng-model="user.content">
              </div>
            </div>
            <div class="form-group">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <a class="btn btn-lg btn-primary wow fadeInUp" data-wow-duration="1000ms" data-wow-delay="400ms" ng-click="submit()">Submit</a>
              </div>
            </div>
          </form>
        </div>
        </div>
      </div>
    </section>

    <section id="footer">
      <div class="container">
        <div class="container">
          <div class="row">
            <div class="col-md-3 col-sm-6 col-xs-12">
              <h3>Contact us</h3>
              <ul>
                <li>Flat no. 207, Symphony, XS Real Helios City, Chennai 603103, India</li>
                <li>+91 9940621284</li>
                <li>dakkhinerbaranda@gmail.com</li>
              </ul>
            </div>
            <div class="col-md-3 col-sm-6 col-xs-12">
              
            </div>
            <div class="col-md-3 col-sm-6 col-xs-12">
              
            </div>
            <div class="col-md-3 col-sm-6 col-xs-12">
              <h3>Find us on</h3>
              <a class="social" href="https://www.facebook.com/DakkhinerBaranda/" target="_blank"><i class="fa fa-facebook"></i></a>
              <a class="social" href="https://plus.google.com/u/0/104532665072920281104" target="_blank"><i class="fa fa-google-plus"></i></a>
            </div>
          </div>
        </div>  
      </div>      
      <!-- Go to Top Link -->
      <a href="#" class="btn btn-primary back-to-top">
      <i class=" mdi-hardware-keyboard-arrow-up"></i>
      </a>
    </section> 

    <section id="copyright">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <p class="copyright-text">
              © Dakkhiner Baranda 2016 All right reserved
              </a>
            </p>
          </div>
        </div>
      </div>
    </section>
    </div>



    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.15/angular.min.js"></script>


    
    <script>
        $(document).ready(function() {
            // This command is used to initialize some elements and make them work properly
            $.material.init();
        });
    </script>

    <script>
    function hide (elements) { 
        elements = elements.length ? elements : [elements]; 
        for (var index = 0; index < elements.length;  index++) { 
          elements[index].style.display='none' ; 
        } 
      }

    function dbController($scope,$http,$location) {
      var href = window.location.href;
      var location = $location.absUrl().split("?")[1].split("=")[1];//58324e93bd966f61a59b6aec
      var url = 'https://api.mlab.com/api/1/databases/dakkhinerbaranda/collections/content/'+location+'?apiKey=FoffkWZUhseXYN3tH_kpgL0JlRdMC-vm';
    
        $http.get(url).success( function(response) {
            hide(document.getElementById('loading'));
            $scope.author = response.authorname;
            $scope.title = response.contentheading;
            $scope.content = response.contentvalue.split('\n');
            $scope.comments = response.comments;
            $scope.commentCount = response.comments.length;
        });

        $scope.submit = function(){
          if($scope.user.name.trim() && $scope.user.content.trim()){
            var commentArray = $scope.comments;
            commentArray.push($scope.user);
            var data = { "$set" : { "comments" : commentArray } };
            var putURL = "https://api.mlab.com/api/1/databases/dakkhinerbaranda/collections/content/"+location+"?apiKey=FoffkWZUhseXYN3tH_kpgL0JlRdMC-vm"
            $http.put(putURL, JSON.stringify(data)).then(function (response) {
              $scope.user={};
            })
          }
        }
      }
      </script>

</body>

</html>